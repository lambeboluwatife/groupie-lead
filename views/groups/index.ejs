<%- include ('../partials/header') %>
    <section class="bg-primary-3 jarallax min-vh-80 d-flex flex-column justify-content-center pb-0 o-hidden" data-jarallax data-speed="0.2" data-overlay>
      <img src="assets/img/new/undraw_group_hangout_re_4t8r.svg" alt="Image" class="jarallax-img opacity-30">
      <div class="container py-5 position-relative">
        <div class="row">
          <div class="col-xl-6 col-lg-7 col-md-9">
            <h1 class="display-4 text-light">Search groups here.</h1>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col">
              <form action="/groups/search" method="POST">
                <div class="input-group input-group-lg mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon-1">
                      <img class="icon" src="assets/img/icons/theme/general/search.svg" alt="search icon" data-inject-svg />
                    </span>
                  </div>
                  <input type="search" class="form-control" placeholder="Search for group" name="search" aria-label="Search" aria-describedby="basic-addon-1">
                  <button class="mx-1 btn btn-primary btn-lg" type="submit">
                    Search
                  </button>
                </div>
                <p class="text-light">You can search by group name, courses, or group type.</p>
              </form>
              <a href="groups/new" class="lead text-light hover-arrow">add group here</a>
          </div>
        </div>
      </div>
      <div class="decoration-wrapper">
        <div class="decoration bottom left scale-2 flip-y d-none d-xl-block" data-jarallax-element="50">
          <img class="bg-white" src="assets/img/decorations/deco-dots-4.svg" alt="deco-dots-4 decoration" data-inject-svg />
        </div>
        <div class="decoration bottom right scale-3" data-jarallax-element="80">
          <img class="bg-primary-2" src="assets/img/decorations/deco-blob-13.svg" alt="deco-blob-13 decoration" data-inject-svg />
        </div>
      </div>
    </section>
    
    <section>
      <div class="container">
        <div class="row justify-content-center text-center mb-6">
          <div class="col-xl-8 col-lg-9">
            <h4 class="display-4 mx-xl-6">Varities of groups.</h4>
            <p class="lead">
              Here are some of our top groups.
            </p>
          </div>
        </div>
        
        <div class="row">
          <% groups.forEach((group) => { %>
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="100">
            <div class="card">
              <a href="#">
                <img src="/<%= group.coverImage %>" alt="Image" class="card-img-top">
              </a>
              <div class="card-body align-items-start">
                <div class="mb-3">
                 <% function titleCase(str) { %>
                    <% return str.toLowerCase().split(' ').map(function(word) { %>
                      <% return (word.charAt(0).toUpperCase() + word.slice(1)); %>
                    <% }).join(' '); %>
                  <% } %>
                  <h3 class="groupName"><%= titleCase(group.groupName) %></h3>
                </div>
                <p>
                  <%= titleCase(group.description) %>
                </p>
                <p>
                  <%= titleCase(group.course) %>
                </p>
                <p>
                  <%= titleCase(group.groupType) %>
                </p>
                <% let formatted_date = group.date.getDate() + "-" +
                (group.date.getMonth() + 1) + "-" + group.date.getFullYear() %>
                <p><strong>Added on: <%= formatted_date %></strong></p>
                  <p class="text-small text-muted mx-xl-6">added by <%= group.author.username %></p>
                <hr>
                  <%  if(!currentUser){ %>
                      <p class="text-small text-muted mx-xl-6">Sign in to join</p>
                  <% } else { %>
                      <a href="<%= group.inviteUrl %>" class="btn btn-primary btn-block">Join</a>
                  <%  } %>
              </div>
            </div>
          </div>
          <%});%>
        </div>

      </div>
    
    <br />
    <%- include ('../partials/footer') %>